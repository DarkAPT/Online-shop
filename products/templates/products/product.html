{% extends "base.html" %}
{% load static %}
{% load product_tags %}

{% block title %} {{title}} {% endblock title %}

    {% block css %}
    <link rel="stylesheet" href="{% static "products/css/product_page.css" %}">
    {% endblock css %}

{% block content %}
<div class="main">
    <div class="left_part">
        <div class="product_name"><h3>{{ product.name }}</h3></div>
        <div class="product_img">
            <img src="{{ product.image.url }}" alt="{{product.name}}">
        </div>
    </div>
    <div class="right_part">
        <div class="price_and_count">
            <div class="buy_price_count">
                <span style="color: rgb(182, 182, 182);">Артикул {{ product.display_id }}</span> <br>
                <span class="product_count">В наличии <span style="color: red;">{{ product.quantity }}</span> шт</span> <br>
                {% if product.discount != 0 %}
                <span class="new-price">{{ product.sell_price }}₽</span>
                <span class="discount">{{ product.discount }}%</span>
                <p class="old-price">{{ product.price_without_disc }}₽</p>
                {% else %}
                <span class="new-price">{{ product.price_without_disc }}₽</span>
                {% endif %}
                <div class="cart_button_favorite">
                    <a class="btn btn-primary" href="{% url "cart:cart_add" product.slug %}"><span>В корзину</span></a>
                    <button class="favorite">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                            <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/>
                          </svg>
                    </button>
                </div>
            </div>
            <div class="brand_img">
                <img src="{{ product.brand_image.url}}" alt="Картинка бренда">
            </div>
        </div>
        <div class="description" id="description">
            <div class="descr_buttons" id="descr_buttons">
                <button onclick="product_description()" id="active"><span>Описание</span></button>
                <button onclick="product_param()" id="not_active"><span >Характеристики</span></button>
            </div>
            <div class="div_active" id="description_div">
                <span class="text_description">{{ product.description }}</span>
            </div>
            <div class="div_hidden" id="product-param_div">
                <div class="product-param">
                    {% tag_characteristics_sets as CharacteristicsSet %}
                    {% for property in CharacteristicsSet %}
                    {% if property.productid.id == product.id %}
                    <div class="p-p">
                        <i>{{ property.propertyid.name }}:</i>
                        <span>{{ property.propertyvalueid.value }}</span>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}
    <script src="{% static "products/js/product_description.js" %}"></script>
    <script src="{% static "products/js/product_page_description_size.js" %}"></script>
{% endblock js %}